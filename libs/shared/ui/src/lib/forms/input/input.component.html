<label class="block mb-2 font-medium" [for]="inputId()">{{ label() }}</label>
<dma-container [focus]="focus()" [disabled]="_disabled()" [valid]="_valid()" [invalid]="_invalid()">
    @if (hasLeadingIcon()) {
        <ng-container [ngTemplateOutlet]="leadingIcon" dmaLeadingIcon />
    }
    <input
        class="outline-none w-full"
        type="text"
        #input
        [id]="inputId()"
        [type]="inputType()"
        [placeholder]="placeholder()"
        [value]="_value()"
        [disabled]="_disabled()"
        (focus)="onFocus()"
        (blur)="onBlur()"
        (input)="onInput(input.value)"
    />
    @if (hasTrailingIcon()) {
        <ng-container [ngTemplateOutlet]="trailingIcon" dmaTrailingIcon />
    } @else if (_valid() && !hasTrailingIcon() && !hasActionButton()) {
        <dma-icon dma-so-check-icon class="m-1 text-emerald-500" />
    } @else if (_invalid() && !hasTrailingIcon() && !hasActionButton()) {
        <dma-icon dma-so-triangle-exclamation-icon class="m-1 text-red-500" />
    }
    @if (hasActionButton()) {
        <ng-container [ngTemplateOutlet]="actionButton" dmaActionButton />
    }
</dma-container>

@if (hasInvalidMessage()) {
    <ng-container [ngTemplateOutlet]="invalidMessage" />
}

<ng-template #leadingIcon>
    <ng-content select="[dmaLeadingIcon]" />
</ng-template>

<ng-template #trailingIcon>
    <ng-content select="[dmaTrailingIcon]" />
</ng-template>

<ng-template #actionButton>
    <ng-content select="[dmaActionButton]" />
</ng-template>

<ng-template #invalidMessage>
    <ng-content select="[dmaInvalidMessage]" />
</ng-template>
